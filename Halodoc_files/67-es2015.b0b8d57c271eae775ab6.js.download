(window.webpackJsonp=window.webpackJsonp||[]).push([[67],{X7yx:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var c=n("fXoL");let o=(()=>{class t{constructor(t){this.applicationRef=t,this.appInstance=this.applicationRef.components[0]?this.applicationRef.components[0].instance:null}setAlerts(t){this.appInstance&&this.appInstance.setAlerts(t)}}return t.\u0275fac=function(e){return new(e||t)(c.hc(c.g))},t.\u0275prov=c.Tb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},o5Px:function(t,e,n){"use strict";n.r(e),n.d(e,"TestReportModule",function(){return P});var c=n("ofXK"),o=n("tyNb"),r=n("fXoL"),a=n("g93E"),i=n("xDH7"),p=n("X7yx"),s=n("z6cu"),d=n("JIr8"),l=n("AytR"),h=n("tk/3");let g=(()=>{class t{constructor(t){this.http=t,this.baseUrl=l.a.magnetoApiBaseUrl}getReport(t,e){return this.http.get(`${this.baseUrl}v1/external-reports/${t}/${e}`).pipe(Object(d.a)(t=>Object(s.a)(t)))}}return t.\u0275fac=function(e){return new(e||t)(r.hc(h.b))},t.\u0275prov=r.Tb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var m=n("lsQv");let u=(()=>{class t{constructor(t){this.http=t,this.baseUrl=l.a.magnetoApiBaseUrl}validateToken(t){return this.http.get(`${this.baseUrl}v1/recaptcha/validate/${t}`).pipe(Object(d.a)(t=>Object(s.a)(t)))}}return t.\u0275fac=function(e){return new(e||t)(r.hc(h.b))},t.\u0275prov=r.Tb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),b=(()=>{class t{constructor(t,e,n,c,o){this.elementRef=t,this.ngZone=e,this.dom=n,this.gRecaptchaService=c,this.alertsService=o,this.lang="id",this.recaptchaValidationSuccess=new r.q,this.recaptchaValidationFailed=new r.q,this.recaptchaExpired=new r.q,this.recaptchaError=new r.q,this.scriptId="google-recaptcha"}ngOnInit(){this.registerCaptchaCallback(),this.addRecaptchaScript()}ngOnDestroy(){this.widgetId=null}registerCaptchaCallback(){window.grecaptchaCallback=()=>{const t={sitekey:l.a.captchaKey,callback:this.onSuccessCallback.bind(this),"error-callback":this.onErrorCallback.bind(this),"expired-callback":this.onExpiredCallback.bind(this)};this.widgetId=this.renderCaptcha(this.elementRef.nativeElement,t)}}addRecaptchaScript(){if(null!=this.dom.getElementById(this.scriptId))return;const t=this.dom.createElement("script");t.src="https://www.google.com/recaptcha/api.js?onload=grecaptchaCallback&render=explicit"+(this.lang?"&hl="+this.lang:""),t.id=this.scriptId,t.async=!0,t.defer=!0,this.dom.body.appendChild(t)}onSuccessCallback(t){this.ngZone.run(()=>{this.verifyToken(t)})}onErrorCallback(){this.ngZone.run(()=>{this.recaptchaError.emit()})}onExpiredCallback(){this.ngZone.run(()=>{this.recaptchaExpired.emit()})}renderCaptcha(t,e){return window.grecaptcha.render(t,e)}verifyToken(t){this.gRecaptchaService.validateToken(t).subscribe(t=>{t.success?this.recaptchaValidationSuccess.emit():this.recaptchaValidationFailed.emit()},t=>{this.recaptchaValidationFailed.emit(),this.alertsService.setAlerts([new a.a("danger",t&&t.error&&t.error.message||"Error while loading report.",3e3)])})}}return t.\u0275fac=function(e){return new(e||t)(r.Xb(r.o),r.Xb(r.F),r.Xb(c.e),r.Xb(u),r.Xb(p.a))},t.\u0275dir=r.Sb({type:t,selectors:[["","magnetoGoogleRecaptchaDirective",""]],inputs:{lang:"lang"},outputs:{recaptchaValidationSuccess:"recaptchaValidationSuccess",recaptchaValidationFailed:"recaptchaValidationFailed",recaptchaExpired:"recaptchaExpired",recaptchaError:"recaptchaError"}}),t})();const v=["captchaSection"];function _(t,e){1&t&&(r.dc(0,"div",14),r.dc(1,"div",15),r.Uc(2," Konsultasi/ hasil pemeriksaan "),r.Yb(3,"br"),r.Uc(4," tidak ditemukan "),r.cc(),r.cc())}function f(t,e){1&t&&(r.bc(0),r.Uc(1," REAKTIF "),r.ac())}function x(t,e){1&t&&(r.bc(0),r.Uc(1,"NON-REAKTIF"),r.ac())}function R(t,e){1&t&&(r.bc(0),r.Uc(1,"POSITIF"),r.ac())}function w(t,e){1&t&&(r.bc(0),r.Uc(1,"NEGATIF"),r.ac())}function C(t,e){1&t&&(r.bc(0),r.Uc(1,"PRESUMPTIF"),r.ac())}function k(t,e){if(1&t&&(r.bc(0),r.Uc(1),r.pc(2,"uppercase"),r.ac()),2&t){const t=r.oc(2);r.Kb(1),r.Vc(r.qc(2,1,t.appointmentReport.report_result))}}const O=function(t,e,n){return{negative:t,positive:e,presumptive:n}};function M(t,e){if(1&t&&(r.dc(0,"div",16),r.dc(1,"div",17),r.dc(2,"div",18),r.Uc(3,"Report"),r.cc(),r.cc(),r.dc(4,"div",19),r.dc(5,"div",20),r.Uc(6,"Nama pasien"),r.cc(),r.dc(7,"div",21),r.Uc(8),r.cc(),r.cc(),r.dc(9,"div",19),r.dc(10,"div",20),r.Uc(11,"Tanggal lahir"),r.cc(),r.dc(12,"div",21),r.Uc(13),r.pc(14,"date"),r.cc(),r.cc(),r.dc(15,"div",19),r.dc(16,"div",20),r.Uc(17,"Lokasi layanan"),r.cc(),r.dc(18,"div",21),r.Uc(19),r.cc(),r.cc(),r.dc(20,"div",19),r.dc(21,"div",20),r.Uc(22,"Waktu & tanggal"),r.cc(),r.dc(23,"div",21),r.Uc(24),r.cc(),r.cc(),r.dc(25,"div",19),r.dc(26,"div",20),r.Uc(27,"Layanan"),r.cc(),r.dc(28,"div",21),r.Uc(29),r.cc(),r.cc(),r.dc(30,"div",19),r.dc(31,"div",20),r.Uc(32,"Hasil"),r.cc(),r.dc(33,"div",21),r.dc(34,"span",22),r.Sc(35,f,2,0,"ng-container",23),r.Sc(36,x,2,0,"ng-container",23),r.Sc(37,R,2,0,"ng-container",23),r.Sc(38,w,2,0,"ng-container",23),r.Sc(39,C,2,0,"ng-container",23),r.Sc(40,k,3,3,"ng-container",23),r.cc(),r.cc(),r.cc(),r.cc()),2&t){const t=r.oc();r.Kb(8),r.Vc(t.appointmentReport.patient_name),r.Kb(5),r.Vc(r.rc(14,13,t.appointmentReport.date_of_birth,"dd MMMM yyyy")),r.Kb(6),r.Vc(t.appointmentReport.provider_location_name),r.Kb(5),r.Xc(" ",t.getLocalizedDate(t.appointmentReport.appointment_date,"Asia/Jakarta","id",!1),", ",t.getLocalizedTime(t.appointmentReport.appointment_date,"Asia/Jakarta")," "),r.Kb(5),r.Vc(t.appointmentReport.inventory_name),r.Kb(5),r.wc("ngClass",r.Cc(16,O,"negative"===t.appointmentReport.report_result,"positive"===t.appointmentReport.report_result||"probable"===t.appointmentReport.report_result,"presumptive"===t.appointmentReport.report_result)),r.Kb(1),r.wc("ngIf",t.appointmentReport&&"covid19"===t.appointmentReport.report_type&&"probable"===t.appointmentReport.report_result),r.Kb(1),r.wc("ngIf",t.appointmentReport&&"covid19"===t.appointmentReport.report_type&&"negative"===t.appointmentReport.report_result),r.Kb(1),r.wc("ngIf",t.appointmentReport&&"pcr"===t.appointmentReport.report_type&&"positive"===t.appointmentReport.report_result),r.Kb(1),r.wc("ngIf",t.appointmentReport&&"pcr"===t.appointmentReport.report_type&&"negative"===t.appointmentReport.report_result),r.Kb(1),r.wc("ngIf",t.appointmentReport&&"pcr"===t.appointmentReport.report_type&&"presumptive"===t.appointmentReport.report_result),r.Kb(1),r.wc("ngIf","pcr"!==t.appointmentReport.report_type&&"covid19"!==t.appointmentReport.report_type||"pcr"===t.appointmentReport.report_type&&"positive"!==t.appointmentReport.report_result&&"negative"!==t.appointmentReport.report_result&&"presumptive"!==t.appointmentReport.report_result||"covid19"===t.appointmentReport.report_type&&"negative"!==t.appointmentReport.report_result&&"probable"!==t.appointmentReport.report_result)}}const y=[{path:"",component:(()=>{class t{constructor(t,e,n,c,o){this.platformId=t,this.activatedRoute=e,this.alertService=n,this.externalReportsService=c,this.googleTracking=o,this.showError=!1}ngOnInit(){Object(c.D)(this.platformId)||(this.activatedRoute.params.subscribe(t=>{this.reportId=t["appointment-id"]||null}),this.googleTracking.trackGaEvent({event:"test_result_validation_pageload",category:"test_result_validation",action:"test_result_validation_pageload",label:this.reportId,value:void 0,nonInteractiveHit:!1}))}onRecaptchaSuccess(){this.getAppointmentReport()}getAppointmentReport(){this.externalReportsService.getReport("appointment",this.reportId).subscribe(t=>{this.showError=!1,this.captchaSection.nativeElement.style.display="none",this.appointmentReport=t},t=>{this.appointmentReport=void 0,this.captchaSection.nativeElement.style.display="none",this.showError=!0,this.alertService.setAlerts([new a.a("danger",t&&t.error&&t.error.message||"Error while loading report.",3e3)])})}getLocalizedDate(t,e="Asia/Jakarta",n="id",c=!0){return Object(i.a)(t,e,n,c)}getLocalizedTime(t,e="Asia/Jakarta",n="en-US"){return Object(i.b)(t,e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Xb(r.I),r.Xb(o.a),r.Xb(p.a),r.Xb(g),r.Xb(m.a))},t.\u0275cmp=r.Rb({type:t,selectors:[["magneto-appointment-test-report"]],viewQuery:function(t,e){if(1&t&&r.ad(v,3),2&t){let t;r.Dc(t=r.lc())&&(e.captchaSection=t.first)}},decls:15,vars:2,consts:[[1,"report-container","h-100"],[1,"row","pt-4"],[1,"header","d-flex","col-12","justify-content-center","align-items-center"],["src","assets/header-footer/halodoc-logo.svg","alt","header",1,"halodoc-logo"],["src","assets/svg/hospital/logo-moh.svg","alt","header",1,"moh-logo"],[1,"captcha-content","mx-sm-4","mx-md-auto","mt-4"],["captchaSection",""],[1,"col-12","captcha-content__title","d-flex","justify-content-center"],[1,"col-12","captcha-content__captcha","d-flex","justify-content-center"],["magnetoGoogleRecaptchaDirective","",3,"recaptchaValidationSuccess"],["class","error-content mx-sm-4 mx-md-auto mt-4 d-flex align-items-center",4,"ngIf"],["class","report-content pt-2 mx-sm-4 mx-md-auto mt-4",4,"ngIf"],[1,"d-flex","fixed-bottom","justify-content-sm-center","justify-content-md-end"],["src","/assets/svg/appointment/report-background.svg",1,"img-fluid"],[1,"error-content","mx-sm-4","mx-md-auto","mt-4","d-flex","align-items-center"],[1,"col-12","text-center"],[1,"report-content","pt-2","mx-sm-4","mx-md-auto","mt-4"],[1,"row","mx-2","report-content__title"],[1,"col-12","report-content__title--text"],[1,"row","mx-2","report-content__item"],[1,"col-6","label"],[1,"col-6","text-right","value","px-2"],[3,"ngClass"],[4,"ngIf"]],template:function(t,e){1&t&&(r.dc(0,"div",0),r.dc(1,"div",1),r.dc(2,"div",2),r.Yb(3,"img",3),r.Yb(4,"img",4),r.cc(),r.cc(),r.dc(5,"div",5,6),r.dc(7,"div",7),r.Uc(8," Silakan klik kotak di bawah ini untuk menampilkan ringkasan hasil pemeriksaan "),r.cc(),r.dc(9,"div",8),r.dc(10,"div",9),r.kc("recaptchaValidationSuccess",function(){return e.onRecaptchaSuccess()}),r.cc(),r.cc(),r.cc(),r.Sc(11,_,5,0,"div",10),r.Sc(12,M,41,20,"div",11),r.dc(13,"div",12),r.Yb(14,"img",13),r.cc(),r.cc()),2&t&&(r.Kb(11),r.wc("ngIf",e.showError),r.Kb(1),r.wc("ngIf",e.appointmentReport))},directives:[b,c.q,c.n],pipes:[c.f,c.A],styles:[".report-container[_ngcontent-%COMP%]{background:#f9f9f9}.report-container[_ngcontent-%COMP%]   .halodoc-logo[_ngcontent-%COMP%]{padding-right:20px;border-right:1px solid #dedede;width:188px;height:35px}.report-container[_ngcontent-%COMP%]   .moh-logo[_ngcontent-%COMP%]{padding-left:20px;width:130px;height:45px}.report-container[_ngcontent-%COMP%]   .negative[_ngcontent-%COMP%]{background-color:#d6fff1;padding:5px 15px}.report-container[_ngcontent-%COMP%]   .presumptive[_ngcontent-%COMP%]{background-color:#fffadf;padding:5px 15px}.report-container[_ngcontent-%COMP%]   .positive[_ngcontent-%COMP%]{background-color:#fce6ee;padding:5px 15px}.report-container[_ngcontent-%COMP%]   .captcha-content[_ngcontent-%COMP%], .report-container[_ngcontent-%COMP%]   .error-content[_ngcontent-%COMP%]{background:#fff;box-shadow:0 0 6px hsla(0,0%,76.9%,.5);border-radius:4px;width:360px;height:310px;z-index:9999;margin:0 auto}.report-container[_ngcontent-%COMP%]   .captcha-content__title[_ngcontent-%COMP%], .report-container[_ngcontent-%COMP%]   .error-content__title[_ngcontent-%COMP%]{padding:30px 30px 60px;z-index:9999}.report-container[_ngcontent-%COMP%]   .captcha-content__captcha[_ngcontent-%COMP%], .report-container[_ngcontent-%COMP%]   .error-content__captcha[_ngcontent-%COMP%]{z-index:9999}@media (max-width:991.98px){.report-container[_ngcontent-%COMP%]   .captcha-content[_ngcontent-%COMP%], .report-container[_ngcontent-%COMP%]   .error-content[_ngcontent-%COMP%]{width:auto;height:310px;margin:0 15px;position:absolute;width:-webkit-fill-available}}.report-container[_ngcontent-%COMP%]   .report-content[_ngcontent-%COMP%]{background:#fff;box-shadow:0 0 6px hsla(0,0%,76.9%,.5);border-radius:4px;width:360px;min-height:310px;margin:0 auto}.report-container[_ngcontent-%COMP%]   .report-content__title[_ngcontent-%COMP%]{font-weight:700;font-size:20px;line-height:27px;color:#333;border-bottom:1px solid #dedede;margin:0 0 10px;padding:0 0 10px}.report-container[_ngcontent-%COMP%]   .report-content__item[_ngcontent-%COMP%]{padding:0 0 15px}.report-container[_ngcontent-%COMP%]   .report-content__item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:400;font-size:16px;line-height:24px;color:#53565a;z-index:9999}.report-container[_ngcontent-%COMP%]   .report-content__item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-weight:700;font-size:16px;line-height:24px;color:#333;z-index:9999}@media (max-width:991.98px){.report-container[_ngcontent-%COMP%]   .report-content[_ngcontent-%COMP%]{width:auto;margin:0 15px;position:absolute;z-index:9999;width:-webkit-fill-available}}"]}),t})()}];let P=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Vb({type:t}),t.\u0275inj=r.Ub({imports:[[c.c,o.i.forChild(y)]]}),t})()}}]);